most basic chat functionality with authentication after refactoring